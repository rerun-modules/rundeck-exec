<!DOCTYPE html>
<html>
<head>
    <meta http-eqiv='content-type' content='text/html;charset=utf-8'>
    <title>output-text</title>
    <link rel=stylesheet type="text/css" 
          href="../../docs.css">
</head>
<body>
 <div id=container>
   <p><a href="../../index.html">rundeck-run</a></p>

<h1>output-text</h1>

<p>print execution output to stdout</p>

<h2>SYNOPSIS</h2>

<pre><code>rerun rundeck-run:output-text --id &lt;&gt; [--last-lines &lt;&gt;] [--format &lt;text&gt;] --server-url &lt;"${SERVER_URL:-}"&gt; --api-token &lt;${API_TOKEN:-}&gt;
</code></pre>

<h3>OPTIONS</h3>

<ul>
<li><a href="../../options/id/index.html">    --id &lt;>: the unique identifier</a></li>
<li><a href="../../options/last-lines/index.html">   [--last-lines &lt;>]: only show specified number of lines</a></li>
<li><a href="../../options/format/index.html">   [--format <text>]: the text format (text|plain|json)</a></li>
<li><a href="../../options/server-url/index.html">    --server-url &lt;"${SERVER_URL:-}">: rundeck base url</a></li>
<li><a href="../../options/api-token/index.html">    --api-token <${API_TOKEN:-}>: the API access token</a></li>
</ul>

<h2>README</h2>

<h3>Examples</h3>

<p>Export the server url and api-token so you dont have to set them as command options:</p>

<pre><code>export SERVER_URL=http://localhost:4440
export API_TOKEN=xxxxxxxxxxxxxxxxxxx
</code></pre>

<p>If you run a job via <em>rundeck-run:job</em> use the number in the first field of output:</p>

<pre><code>rerun rundeck-run:job --id 4ece2781-bc42-43c5-93b0-46638a52fed5
* 977 execution - [myproject: myjob] - running - 7s average-duration - by alexh
</code></pre>

<p>The first number <code>977</code> is the execution identifier.</p>

<p>When the job succeeds the status will change from 'running' to 'succeeded':</p>

<pre><code>rerun rundeck-run:status --id 977
* 977 execution - [myproject: myjob] - succeeded - 7s duration
</code></pre>

<p>You can then get the output</p>

<pre><code>run output-text --id 977
output from my job
output from my job
output from my job
output from my job
</code></pre>

<p>Get just the last lines</p>

<pre><code>run output-text --id 977 --last-lines 1
output from my job
</code></pre>

<h4>Format</h4>

<p>By default, 'text' is the output format. This is the output generated by each of the command steps.
It does not include execution metadata. This is available as xml or json</p>

<pre><code>run output-text --id 977 --last-lines 1 --format xml
</code></pre>

<p>Will produce output similar to:</p>

<pre><code>&lt;output&gt;
  &lt;id&gt;977&lt;/id&gt;
  &lt;offset&gt;7397&lt;/offset&gt;
  &lt;completed&gt;true&lt;/completed&gt;
  &lt;execCompleted&gt;true&lt;/execCompleted&gt;
  &lt;hasFailedNodes&gt;false&lt;/hasFailedNodes&gt;
  &lt;execState&gt;succeeded&lt;/execState&gt;
  &lt;lastModified&gt;1436828109000&lt;/lastModified&gt;
  &lt;execDuration&gt;7800&lt;/execDuration&gt;
  &lt;percentLoaded&gt;100&lt;/percentLoaded&gt;
  &lt;totalSize&gt;403&lt;/totalSize&gt;
  &lt;entries&gt;
    &lt;entry time='15:55:02' 
        absolute_time='2015-07-13T22:55:02Z' 
        log='output from my job' 
        level='NORMAL' 
        user='alex' 
        command='' 
        stepctx='1' 
        node='rundeck1' /&gt;
        .
        .
  &lt;/entries&gt;
&lt;/output&gt;
</code></pre>

<h2>TESTS</h2>

<p>Use the <code>stubbs:test</code> command to to run test plans.</p>

<pre><code>rerun stubbs:test -m rundeck-run -p output-text
</code></pre>

<p><em>Test plan sources</em></p>

<ul>
<li><a href="../../tests/output-text-1.html">output-text-1</a>
<ul>
<li>it fails without a real test</li>
</ul></li>
</ul>

<h2>SCRIPT</h2>

<p>To edit the command script for the rundeck-run:output-text command, 
use the <code>stubbs:edit</code>
command. It will open the command script in your shell EDITOR.</p>

<pre><code>rerun stubbs:edit -m rundeck-run -c output-text
</code></pre>

<p><em>Script source</em></p>

<ul>
<li><a href="script.html">script</a>: <code>RERUN_MODULE_DIR/commands/output-text/script</code></li>
</ul>

<h2>METADATA</h2>

<ul>
<li><code>NAME</code> = output-text</li>
<li><code>DESCRIPTION</code> = "print execution output to stdout"</li>
<li><code>OPTIONS</code> = "id last-lines format server-url api-token"</li>
</ul>

<hr />

<p><em>Generated by stubbs:docs Mon Jul 13 16:11:09 PDT 2015</em></p>
 </div>
</body>
</html>
